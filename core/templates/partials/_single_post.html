<div class="card shadow-sm mb-3">
  <div class="card-body post" data-post data-post-id="{{ post.id }}">
    <!-- VIEW MODE -->
    <div class="post-view">
      <div class="d-flex justify-content-between">
        <div class="d-flex flex-column align-items-start mb-3">
          <h5 class="post-title fw-bold mb-0">{{ post.title }}</h5>
          <small>{{ post.created_at|timesince }} ago</small>
        </div>
        <div class="d-flex align-items-center">
          <button type="button" class="btn btn-icon btn-text-secondary rounded-pill edit-post">
            <i class="icon-base ri ri-edit-line icon-md"></i>
          </button>
          <a href="javascript:;" class="btn btn-icon btn-text-secondary rounded-pill delete-record">
            <i class="icon-base ri ri-delete-bin-7-line icon-md"></i>
          </a>
        </div>
      </div>
      <p class="post-body text-muted mb-3">{{ post.body }}</p>
    </div>
    <!-- EDIT MODE (hidden by default, same as before) -->
    <form class="post-edit d-none">
      {% csrf_token %}
      <h5 class="card-title mb-3">Update Post</h5>
      <div class="mb-3">
        <label class="form-label">Title</label>
        <input type="text" class="form-control post-title-input" name="title" value="{{ post.title }}" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Body</label>
        <textarea class="form-control post-body-input" name="body" rows="4" required>{{ post.body }}</textarea>
      </div>
      <div class="d-flex justify-content-end gap-2">
        <button type="button" class="btn btn-outline-secondary btn-sm cancel-edit">Cancel</button>
        <button type="submit" class="btn btn-primary btn-sm">Save</button>
      </div>
    </form>
  </div>
  <hr class="my-0" />
  <div class="card-body">
    <div class="comments-container">
      <h4>Comments (<span class="comments-count">{{ post.comments.count }}</span>)</h4>
      {% for comment in post.comments.all %}
        {% include 'partials/_comment_item.html' with comment=comment %}
      {% endfor %}
    </div>
    <form class="new-comment-form" data-comment-form data-post-id="{{ post.id }}">
      {% csrf_token %}
      <div class="d-flex align-items-start">
        <div class="flex-shrink-0">
          <div class="rounded-circle bg-primary text-white d-flex align-items-center justify-content-center"
              style="width: 36px; height: 36px;">
            ?
          </div>
        </div>
        <div class="ms-3 flex-grow-1">
          <textarea class="form-control mb-2 new-comment-text" rows="2" placeholder="Write a comment..."></textarea>
          <div class="text-end">
            <button type="submit" class="btn btn-primary btn-sm">Comment</button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
